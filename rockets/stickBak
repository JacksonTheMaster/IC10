main:
define ATMOSTHROTTLEVOLPRESSURE 10000
define ATMOSTHROTTLEOXYPRESSURE 5000
define FULLTHROTTLEVOLPRESSURE 55000
define FULLTHROTTLEOXYPRESSURE 27500
define FALSE 0
define TRUE 1
alias PUMP r13
alias AVIONICS d0
alias VOLANA d2
alias VOLPUMP d3
alias OXYANA d4
alias OXYPUMP d5
alias CurrentTTW r0
alias ATMOSPHEREMODE r2
alias VOLPRESSURE r15
alias OXYPRESSURE r14
alias CURRENTPUMP r11
alias CURRENTANA r10

s VOLANA On TRUE
s OXYANA On TRUE
l CurrentTTW AVIONICS ThrustToWeight
sltz ATMOSPHEREMODE CurrentTTW # if CurrentTTW smaller than 0 return ATMOSPHEREMODE true
beq ATMOSPHEREMODE TRUE atmosthrottle
beq ATMOSPHEREMODE FALSE fullthrottle
j main

atmosthrottle:
#s db Setting 15
l VOLPRESSURE VOLANA Pressure
l OXYPRESSURE OXYANA Pressure

alias CURRENTPUMP d5
alias CURRENTANA d4
slt PUMP OXYPRESSURE ATMOSTHROTTLEOXYPRESSURE
s db Setting PUMP
jal pump
alias CURRENTPUMP d3
alias CURRENTANA d2
slt PUMP VOLPRESSURE ATMOSTHROTTLEVOLPRESSURE
jal pump

j main

fullthrottle:
#s db Setting 50
l OXYPRESSURE OXYANA Pressure
l VOLPRESSURE VOLANA Pressure

alias CURRENTPUMP d5
alias CURRENTANA d4
slt PUMP OXYPRESSURE FULLTHROTTLEOXYPRESSURE
jal pump
alias CURRENTPUMP d3
alias CURRENTANA d2
slt PUMP VOLPRESSURE FULLTHROTTLEVOLPRESSURE
jal pump

j main

pump:
s CURRENTPUMP On PUMP
j ra